<!-- Include -->
<div ng-controller="ZwaveExcludeController">
    
    <div ng-if="zWaveDevice.id">
        <div class="device-perex clearfix"> 
            <h2>{{_t('Removing device')}}: {{zWaveDevice.name}}</h2>
            <p>{{_t('You want to remove and reset device from your Z-Wave network?')}} </p>
        </div>
        <div class="col-device app-border app-gradient app-shadow">
            <!-- RemoveNodeFromNetwork proccess --> 
            <div ng-if="zWaveDevice.lastExcludedDevice != zWaveDevice.id">
                <div class="exclude-device" ng-hide="[5].indexOf(zWaveDevice.controllerState) > -1">
                    <p><strong>{{_t('Please start the removal and resetting process by hitting the button below.')}} </strong></p>
                    <button class="btn btn-success btn-lg"
                            ng-disabled="zWaveDevice.removeNodeProcess"
                            ng-click="runZwaveCmd('controller.RemoveNodeFromNetwork(1)')"
                            >{{_t('btn_exclusion_start')}}</button> 
                </div>
                <div class="exclude-device" ng-show="zWaveDevice.controllerState == 5">
                    <div class="alert alert-warning"><i class="fa fa-spinner fa-spin"></i> <strong>{{_t('Now confirm the exclusion in the device to be removed. You may need to consult the device manual for more information  about how to confirm the exclusion or removal of the device. This process will also reset the devcie back to factory default.')}}</strong></div>
                    <button 
                        class="btn btn-danger btn-lg"
                        ng-click="runZwaveCmd('controller.RemoveNodeFromNetwork(0)')">
                        {{_t('btn_exclusion_stop')}}</button>
                </div>
            </div>
            <!-- RemoveNodeFromNetwork result --> 
            <div class="exclude-device" ng-if="zWaveDevice.lastExcludedDevice == zWaveDevice.id">
                <div class="alert alert-success">
                    <i class="fa fa-check"></i> <strong>{{_t('lb_device_excluded')}}</strong>
                </div>
            </div>
        </div>
        <div class="fieldset submit-entry">
            <button type="button" class="btn btn-default" bb-go-back><i class="fa fa-times  text-danger"></i> <span ng-bind="_t('lb_cancel')"></span></button>
            <!-- <a href="#zwave/devices" class="btn btn-info">{{_t('continue')}} <i class="fa fa-chevron-right"></i></a> --> 
        </div>
        <p>&nbsp;</p>

        <div class="col-device app-border app-gradient app-shadow">
            <!-- RemoveFailedNode proccess --> 
            <div ng-if="!zWaveDevice.removeNodeProcess">
                <div class="exclude-device">
                    <button class="btn btn-success btn-lg"
                            ng-disabled_="[5, 6, 7, 20].indexOf(controllerState) > -1"
                            ng-show_="[1, 2, 3, 4].indexOf(controllerState) == -1"
                            ng-click="zWaveDevice.removeNode = !zWaveDevice.removeNode" >{{_t('The device is broken or lost')}}</button>
                </div>
                <div class="exclude-device" ng-if="zWaveDevice.removeNode">
                    <div class="alert alert-warning"><i class="fa fa-info-circle"></i> {{_t('Please use this process only in case your device is really damaged, broken or not available anymore. It will remove the device but not reset it so that I can not be used in a different network again.')}}</div>

                    <button class="btn btn-danger btn-lg"
                            ng-click="removeFailedNode('devices[' + zWaveDevice.id + '].RemoveFailedNode()')"
                            >{{_t('Remove Permanently')}}</button>

                </div>
            </div>
            <div class="exclude-device" ng-if="zWaveDevice.removeNodeProcess">
                <div class="alert alert-warning">
                    <i class="fa fa-spinner fa-spin"></i> <strong>{{_t('The wireless connection to the device is tested. This process may take some minutes. If the device is alive it will _NOT_ be excluded from the network. In this case use the exclusion and reset process above.')}}</strong>
                </div>
            </div>
        </div>
        <div class="fieldset submit-entry">
            <button type="button" class="btn btn-default" bb-go-back><i class="fa fa-times  text-danger"></i> <span ng-bind="_t('lb_cancel')"></span></button>
        </div>
    </div>
    <div class="device-logo" ng-include="'app/views/zwave/zwave_nav.html'"></div>
</div> <!-- /ng-controller --> 

