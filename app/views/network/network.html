<!-- Network view -->
<div ng-controller="NetworkController">
    
    <div class="tabs-container">
        <ul class="nav nav-tabs nav-tabs-3" role="tablist">
            <li ng-class="activeTab == 'battery' ? 'active' : ''" ng-if="user.role == 1">
                <a href="" title="{{_t('lb_battery_status')}}" data-target="#module_battery" data-toggle="tab" ng-click="setTab('battery')">
                    <i class="fa fa-bolt fa-lg tab-icon"></i> <span class="tab-name">{{_t('lb_battery_status')}}</span>
                </a>
            </li>
            <li ng-class="activeTab == 'zwave' ? 'active' : ''">
                <a href="" title="{{_t('lb_zwave_devices')}}" data-target="#module_zwave" data-toggle="tab" ng-click="setTab('zwave')">
                    <i class="fa fa-wifi fa-lg tab-icon"></i> <span class="tab-name">{{_t('lb_zwave_devices')}}</span>
                </a>
            </li>
            <li ng-class="activeTab == 'health' ? 'active' : ''" ng-if="user.role == 1">
                <a href="" title="{{_t('nav_network_health')}}" data-target="#module_health" data-toggle="tab" ng-click="setTab('health')">
                    <i class="fa fa-cog fa-sitemap tab-icon"></i> <span class="tab-name">{{_t('lb_network_status')}}</span> 
                </a>
            </li>
        </ul>
    </div>
    <!-- Tab panes -->
    <div class="tab-content">
        <!-- Battery -->
        <div class="tab-pane" id="module_battery" ng-class="activeTab == 'battery' ? 'active' : ''">
             <!-- <br />
            <p>
            <span ng-if="batteries.list.length > 0"><strong ng-bind="batteries.list.length"></strong> <span ng-bind="_t('lb_battery_devices')"></span>,</span>
            <span ng-if="batteries.cntLess20.length > 0"><strong ng-bind="batteries.cntLess20.length"></strong> <span ng-bind="_t('lb_battery_20')"></span>, </span> 
            <span ng-if="batteries.cnt0.length > 0"><strong  ng-bind="batteries.cnt0.length"></strong> <span ng-bind="_t('lb_battery_0')"></span> </span>
        </p>-->
        <table class="table table-report table-condensed">
            <tbody>
                <tr ng-repeat="v in devices.batteries| orderBy:'level':false" id="row_battery_{{ v.rowId}}">
                    <td class="td-img">
                       
                        <img class="report-img" ng-src="storage/img/batteries/{{v.metrics.level|getBatteryIcon}}" alt="img" />
                    </td>
                    <td class="network-zwave-device">
                        <span class="network-node-name">(#{{v.nodeId}}) {{v.nodeName}}</span>
                        <div  ng-bind="v.metrics.title"></div>
                    </td>
                    <td>
                        <span class="text-success" ng-show="v.metrics.level >= 80">{{v.metrics.level}} %</span>
                        <span class="text-default" ng-show="v.metrics.level < 80 && v.metrics.level > 20">{{v.metrics.level}} %</span>
                        <span class="text-danger" ng-show="v.metrics.level <= 20"><i class="fa fa-exclamation-triangle"></i> {{v.metrics.level}} %</span>

                    </td>
                </tr>
            </tbody>
        </table>
        </div>
        <!-- Z-Wave -->
        <div class="tab-pane" id="module_zwave" ng-class="activeTab == 'zwave' ? 'active' : ''">
            <table class="table table-condensed table-report">
            <tbody>
                <tr ng-repeat="v in zWaveDevices | orderBy:'id':false" id="row_zwave_{{v.id}}" ng-if="v.elements">
                    <td class="td-img">
                        <img class="report-img" ng-src="{{v.icon|getElementIcon:e}}" alt="{{ v.title}}" />
                    </td>
                    <td class="network-zwave-device">
                        <span class="network-node-name">(#{{v.id}}) {{v.title}}</span>
                        <div  class="network-zwave-device" ng-repeat="e in v.elements | orderBy:'title':false" ng-bind="e.title"></div>
                         
                    </td>
                    <td class="td-action" ng-if="user.role == 1">
                       <a class="btn btn-default" href="#deviceconfig/{{v.id}}"><i class="fa fa-cog text-primary"></i> <span class="btn-name" ng-bind="_t('lb_configuration')"></span></a>
                    </td>
                </tr>
            </tbody>
        </table>
             <!--<table class="table table-condensed table-report">
            <tbody>
                <tr ng-repeat="v in devices.zwave | orderBy:'title':false" id="row_zwave_{{v.id}}">
                    <td class="td-img">
                        <img class="report-img" ng-src="{{v.metrics.icon|getElementIcon:e}}" alt="{{ v.title}}" />
                    </td>
                    <td class="network-zwave-device">
                         <span ng-bind="v.title"></span>  <span class="network-node-name">(#{{v.nodeId}}) {{v.nodeName}}</span>
                    </td>
                    <td class="td-action">
                       <a class="btn btn-default" href="#deviceconfig/{{v.nodeId}}"><i class="fa fa-cog text-primary"></i> <span class="btn-name" ng-bind="_t('lb_configuration')"></span></a>
                    </td>
                </tr>
            </tbody>
        </table>-->
        </div>
        <!-- Health -->
        <div class="tab-pane" id="module_health" ng-class="activeTab == 'health' ? 'active' : ''">
             <!--  <br />
             <p class="mobile-padding">
                 <span ng-bind="_t('lb_solve_network_error')"></span> <a href="/expert/" class="alert-link"><strong ng-bind="_t('lb_zwui')"></strong> <i class="fa fa-external-link"></i></a>
             </p> -->
             
             <table class="table table-condensed table-report">
            <tbody>
                <tr ng-repeat="v in zWaveDevices | orderBy:'id':false" id="row_health_{{v.id}}" ng-if="v.messages">
                    <td class="td-img">
                        <img class="report-img" ng-src="{{v.icon|getElementIcon:e}}" alt="{{ v.title}}" />
                    </td>
                    <td class="network-zwave-device">
                        <span class="network-node-name">(#{{v.id}}) {{v.title}}</span>
                        <div  class="network-zwave-device" ng-repeat="e in v.elements | orderBy:'title':false" ng-bind="e.title"></div>
                    </td>
                    <td>
                        <div class="text-danger" ng-repeat="m in v.messages|unique:true">
                            <a class="text-danger" href="" ng-if="m.type == 'failed' || m.type == 'config'" ng-click="toExpert('/expert/#help/' + v.id,_t('redirect_to_expert'))" >
                                <span  ng-bind="m.error"></span> <i class="fa fa-external-link"></i>
                            </a>
                            <span ng-if="m.type == 'battery'" ng-bind="m.error"></span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
            <!--<table class="table table-condensed table-report">
            <tbody>
                <tr ng-repeat="v in devices.failed | orderBy:'title':false" id="row_health_{{v.id}}" ng-show=" v.messages.length > 0">
                    <td class="td-img">
                         <img class="report-img" ng-src="{{v.metrics.icon|getElementIcon:v}}" alt="{{ v.metrics.title}}" />
                    </td>
                    <td ng-bind="v.metrics.title"> </td>
                    <td>
                        <div class="text-danger" ng-repeat="message in v.messages" ng-bind="message"></div>
                    </td>
                </tr>
            </tbody>
        </table>-->
           
        </div>
    </div>
    
</div> <!-- /ng-controller --> 