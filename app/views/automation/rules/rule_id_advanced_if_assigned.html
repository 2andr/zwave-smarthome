<div class="automation-report app-row-report clearfix">
  <!-- Report body -->
  <div class="report-entry" ng-switch="d.testType" ng-repeat="d in rule.input.params.advanced.tests track by $index" ng-init="testModel=d[rule.advanced.cfg.tests[d.testType].testName]">
    <div class="report-col">
      <div class="clickable" ng-click="expandElement('test_' + $index)">
        <span class="label label-info" ng-hide="$index == 0">{{rule.input.params.advanced.logicalOperator| uppercase}}</span>

        <span ng-switch-when="time">{{testModel.testValue}}</span>
        <span ng-switch-when="nested">{{testModel.logicalOperator}}</span>
        <span ng-switch-default>{{testModel.device}} ({{testModel.testOperator}} {{testModel.testValue}})</span>
        <span>
          -
          <em>{{d.testType}}</em>
        </span>
      </div>
      <div class="form-collapsed" ng-if_="expand['test_' + $index]" ng-include="'app/views/automation/rules/rule_id_advanced_if_'+ d.testType +'.html'"></div>
    </div>
    <div class="report-col report-ctrl">
      <button type="button" class="btn btn-default" title="{{_t('lb_remove')}}" ng-hide="d.filterThen == 'toggleButton'" ng-click="expandElement('test_' + $index)">
        <i class="fa" ng-class="expand['test_' + $index] ? 'fa-reply' : 'fa-pencil text-primary'"></i>
      </button>
      <button type="button" class="btn btn-default" title="{{_t('lb_remove')}}" ng-click="unassignAdvancedTest($index)">
        <i class="fa fa-times text-danger"></i>
      </button>
    </div>
  </div>
</div>
<!-- <pre>{{rule.input.params.advanced.tests|json}}</pre> -->