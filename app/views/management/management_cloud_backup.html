<!-- Admin backup view -->
<h2 class="accordion-entry-title" ng-click="expandElement('cloud')">
    <i class="fa fa-cloud-download"></i> <span ng-bind="_t('backup_cloud')"></span>
    <i class="fa accordion-arrow" ng-class="expand.backup ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
</h2>
<div class="accordion-entry-ctrl" ng-if_="expand.cloud" ng-controller="ManagementCloudBackupController">
    <bb-loader></bb-loader>
    <bb-alert alert="managementCloud.alert"></bb-alert>
    <form name="form_cloud_backup" id="form_cloud_backup" class="form form-page" 
          ng-if="managementCloud.show"
          ng-submit="updateInstance(form_cloud_backup, managementCloud.instance)" novalidate>
        <fieldset>
            <!-- email -->
            <div class="form-group form-inline">
                <label>{{_t('lb_email')}}: </label>
                <input name="email" id="email" type="email" class="form-control" 
                       value="{{managementCloud.instance.params.email}}" 
                       ng-model="managementCloud.instance.params.email" 
                       ng-blur="emailBlur = true" />
                <bb-validator input-name='form_cloud_backup.email.$error.email' trans='_t("email_invalid")' has-blur='emailBlur'></bb-validator> 

            </div>
            <!-- email log -->
            <div class="form-group">
                <input type="radio" name="email_log" value="0" id="email_log_0" 
                       ng-model="managementCloud.instance.params.email_log" 
                       ng-checked="managementCloud.instance.params.email_log === 0" /> 
                <label ng-bind="_t('no_email_log')"></label><br />
                <input type="radio" name="email_log" value="1" id="email_log_1" 
                       ng-model="managementCloud.instance.params.email_log" 
                       ng-checked="managementCloud.instance.params.email_log === 1" /> 
                <label ng-bind="_t('email_log_error')"></label><br />
                <input type="radio" name="email_log" value="2" id="email_log_2" 
                       ng-model="managementCloud.instance.params.email_log" 
                       ng-checked="managementCloud.instance.params.email_log === 2" /> 
                <label ng-bind="_t('email_log_all')"></label>
            </div>
        </fieldset>
        <fieldset ng-if_="managementCloud.instance.params.user_active">
            <h3>Scheduler</h3>
            <div class="btn-group">
                <button class="btn btn-default" title="{{_t('daily')}}"
                        ng-class="managementCloud.type === 'day' ? 'active':''"
                        ng-click="setSchedulerType('day')"
                        >{{_t('daily')}}</button>
                <button class="btn btn-default" title="{{_t('weekly')}}"
                         ng-class="managementCloud.type === 'week' ? 'active':''"
                        ng-click="setSchedulerType('week')"
                        >{{_t('weekly')}}</button>
                <button class="btn btn-default" title="{{_t('monthly')}}"
                         ng-class="managementCloud.type === 'month' ? 'active':''"
                        ng-click="setSchedulerType('month')"
                        >{{_t('monthly')}}</button> 
            </div>
            <div class="form-group form-inline">
                <!-- Day -->
                <label>{{_t('hour')}}</label>
                <select class="form-control" ng-model="managementCloud.instance.params.hours">
                    <option value="{{v}}" 
                            ng-repeat="v in managementCloud.enums.hours track by $index"
                            ng-selected="v === managementCloud.instance.params.hours">
                        {{v}}
                    </option>
                </select>
                <!-- Minute -->
                <label>{{_t('minute')}}</label>
                <select class="form-control" ng-model="managementCloud.instance.params.minutes">
                    <option value="{{v}}" 
                            ng-repeat="v in managementCloud.enums.minutes track by $index"
                            ng-selected="v === managementCloud.instance.params.minutes">
                        {{v}}
                    </option>
                </select>
                <!--Week -->
                <span ng-if="managementCloud.type === 'week'">
                <label>{{_t('weekday')}}</label>
                <select class="form-control" ng-model="managementCloud.instance.params.weekDays">
                    <option value="{{v}}" 
                            ng-repeat="v in managementCloud.enums.weekDays track by $index"
                            ng-selected="v === managementCloud.instance.params.weekDays">
                        {{managementCloud.labels.weekDays[$index]}}
                    </option>
                </select>
                </span>
                <!--Month -->
                <span ng-if="managementCloud.type === 'month'">
                <label>{{_t('month')}}</label>
                <select class="form-control" ng-model="managementCloud.instance.params.days">
                    <option value="{{v}}" 
                            ng-repeat="v in managementCloud.enums.days track by $index"
                            ng-selected="v === managementCloud.instance.params.days">
                        {{v}}
                    </option>
                </select>
                 </span>
            </div>
        </fieldset>
        <fieldset  class="submit-entry">
            <button type="submit" class="btn btn-submit" title="{{_t('lb_save')}}" ng-disabled="form_cloud_backup.$invalid">
                <i class="fa fa-check"></i> <span class="btn-name">{{_t('lb_save')}}</span>
            </button>
        </fieldset>
    </form>
</div>
