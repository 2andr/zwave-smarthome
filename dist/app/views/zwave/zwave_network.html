<!-- Zwave network view -->
<div ng-controller="ZwaveManageController">
     <bb-loader></bb-loader>
    <!-- Zwave navigation -->
    <div ng-include="'app/views/zwave/navi.html'"></div>
    <div class="app-row app-row-report app-row-zwave clearfix" ng-if="devices.show">
         <div id="row_zwave_network_{{v.id}}" class="report-entry" ng-repeat="v in zWaveDevices | orderBy:'title':false" ng-if="v.messages">
             <div class="report-col report-body zwave-network">
                <span class="network-zwave-title noelements clickable" ng-if="v.elements.length < 1">{{v.title|cutText:true:25}} (#{{v.id}}) </span>
                <a href="" class="network-zwave-title clickable" ng-click="expandElement('accZwaveNetwork_' + v.id)" ng-if="v.elements.length > 0">
                    <i class="fa" ng-class="expand['accZwaveNetwork' + '_' + v.id] ? 'fa-chevron-up': 'fa-chevron-down'"></i> {{v.title}} (#{{v.id}})
                 </a>
                 <div ng-if="expand['accZwaveNetwork_' + v.id]">
                 <div class="network-zwave-element zwave-hidden-{{e.permanently_hidden}}" ng-repeat="e in v.elements | orderBy:'title':false">
                     <a ng-href="#/element/{{e.id}}">
                         <img class="report-img-s" ng-src="{{e.metrics.icon|getElementIcon:e:e.level}}" alt="img" /> {{e.title|cutText:true:25}} <span class="zwave-raquo">&raquo;</span>
                     </a>
                   </div>
                   </div>
            </div>
         <div class="report-col report-ctrl">
             <div ng-repeat="m in v.messages|unique:true">
                 <div class="text-danger" >{{m.error}}</div>
                 <button class="btn btn-default" ng-if="m.type == 'failed' || m.type == 'config'" ng-click="devices.find = v;handleModal('zwaveNetworkModal', $event)">
                         <i class="fa fa-cog text-primary"></i> <span class="btn-name">{{_t('configure_device')}}</span>
                    </button> 
                
                <!--<span ng-if="!isMobile">
                    <a class="text-danger" href="" ng-if="m.type == 'failed' || m.type == 'config'" ng-click="toExpert('/expert/#help/' + v.id, _t('redirect_to_expert'))" >
                        <span  ng-bind="m.error"></span> <i class="fa fa-external-link"></i>
                    </a>
                    <button class="btn btn-default" ng-if="m.type == 'failed' || m.type == 'config'" ng-click="devices.find = v;handleModal('zwaveNetworkModal', $event)">
                         <i class="fa fa-cog text-primary"></i> <span class="btn-name">{{_t('configure_device')}}</span>
                    </button> 
                </span>
                <span ng-if="isMobile">
                    <span  class="text-danger" ng-if="m.type == 'failed' || m.type == 'config'" ng-bind="m.error"></span>
                </span>
                <span ng-if="m.type == 'battery'" ng-bind="m.error"></span> -->
            </div>
         </div>
        </div>
      </div>
    <div class="device-logo" ng-include="'app/views/zwave/zwave_nav.html'"></div>
    
    <!-- Interview modal -->
    <div id="zwaveNetworkModal" class="appmodal" ng-controller="ZwaveInterviewController" ng-if="modalArr.zwaveNetworkModal && !_.isEmpty(devices.find)">
      <div class="appmodal-in">
          <div class="appmodal-header">
              <span class="appmodal-close" ng-click="cancelConfiguration($event)"><i class="fa fa-times"></i></span>
              <h3>{{devices.find.title|cutText:true:25}} (#{{devices.find.id}})</h3>
          </div>
          <div class="appmodal-body">
               <div class="alert alert-warning" ng-hide="zwaveInterview.progress > 99">
                    <i class="fa fa-spinner fa-spin"></i> <strong>{{_t('configuring_device')}}</strong> 
                </div>
              <div class="progress">
                <div class="progress-bar" 
                     style="min-height:40px;min-width: 2em; width: {{zwaveInterview.progress}}%;"
                     ng-class="zwaveInterview.progress < 100 ? 'progress-bar-striped active' : 'progress-bar-success'">
                    {{zwaveInterview.progress}}%
                </div>
            </div>
          </div>
          <div class="appmodal-footer">
              <button type="button" class="btn btn-default" ng-click="cancelConfiguration($event)">
                  <i class="fa fa-times text-danger"></i> <span class="btn-name">{{_t('lb_cancel')}}</span>
              </button>
          </div>
      </div>
  </div>
</div> <!-- /ng-controller --> 